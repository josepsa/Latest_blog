{% extends 'base.html' %}
{% block content %}
    <div class="jumbotron">
    <h1>{{ post.title }}</h1>
    {% if post.published_date %}
        <div><h6>Published on {{ post.published_date }}</h6></div>
        <h6>Posted by {{ post.author }}</h6>
        <p>{{ post.text }}</p>
        {% if user.is_authenticated %}
            <a class="btn btn-primary" href="{% url 'blog_app:add_comment' pk=post.pk %}">Add comment</a>
        {% endif %}
        <p><strong>{{ post.comments.count }} comments</strong></p>
        {% for i in post.comments.all %}
<!--            'comments' comes from related name of models foregin key-->
                <p><strong>{{ i.created_by }}</strong> at {{ i.created_date }}</p>
                <p>{{ i.text|safe|linebreaks }}</p>

        {% endfor %}
    {% else %}
        <h6>Posted by {{ post.author }}</h6>
        <h6>Not published</h6>
        <p>{{ post.text }}</p>
         <a class="btn btn-primary" href="{% url 'blog_app:post_publish' pk=post.pk %}">Publish</a>

    {% endif %}


{% endblock %}